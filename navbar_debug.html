<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Navbar Dropdown Debug</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Copy the navbar styles */
        .navbar-glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.08);
            padding: 0.75rem 0;
            min-height: 70px;
            z-index: 1030;
            overflow: visible;
        }
        
        .dropdown-menu {
            border: none !important;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1) !important;
            border-radius: 8px !important;
            margin-top: 0.25rem !important;
            min-width: 250px !important;
            z-index: 9999 !important;
            background: white !important;
            position: absolute !important;
        }
        
        .dropdown {
            position: relative !important;
        }
        
        .container-fluid {
            overflow: visible !important;
        }
        
        body {
            padding-top: 100px;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-glass fixed-top">
        <div class="container-fluid px-3 px-lg-4">
            <a class="navbar-brand" href="#">
                <i class="fas fa-seedling me-2"></i>BhoomiSetu
            </a>
            
            <!-- Language Dropdown Test -->
            <div class="nav-item dropdown me-2">
                <button class="btn btn-outline-dark btn-sm dropdown-toggle d-flex align-items-center" 
                        type="button" 
                        id="languageDropdown" 
                        data-bs-toggle="dropdown" 
                        aria-expanded="false">
                    <i class="fas fa-globe"></i>
                    <span class="ms-1">English</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="languageDropdown">
                    <li class="dropdown-header">
                        <i class="fas fa-globe me-1"></i>Select Language
                    </li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item active" href="#">English</a></li>
                    <li><a class="dropdown-item" href="#">Hindi</a></li>
                    <li><a class="dropdown-item" href="#">Telugu</a></li>
                    <li><a class="dropdown-item" href="#">Tamil</a></li>
                </ul>
            </div>
            
            <!-- User Dropdown Test -->
            <div class="dropdown">
                <button class="btn btn-outline-dark btn-sm dropdown-toggle" 
                        type="button" 
                        id="userDropdown" 
                        data-bs-toggle="dropdown">
                    <i class="fas fa-user"></i> User
                </button>
                <ul class="dropdown-menu dropdown-menu-end">
                    <li><a class="dropdown-item" href="#">Profile</a></li>
                    <li><a class="dropdown-item" href="#">Settings</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#">Logout</a></li>
                </ul>
            </div>
        </div>
    </nav>
    
    <div class="container mt-5">
        <h1>Navbar Dropdown Debug</h1>
        <div class="alert alert-info">
            <h5>Debug Information:</h5>
            <p><strong>Bootstrap:</strong> <span id="bootstrap-status">Loading...</span></p>
            <p><strong>Dropdowns Found:</strong> <span id="dropdown-count">Counting...</span></p>
            <p><strong>Last Action:</strong> <span id="last-action">None</span></p>
        </div>
        
        <div class="mt-3">
            <button onclick="forceShowLanguage()" class="btn btn-primary me-2">Force Show Language</button>
            <button onclick="forceShowUser()" class="btn btn-primary me-2">Force Show User</button>
            <button onclick="debugDropdowns()" class="btn btn-info">Debug All Dropdowns</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let languageDropdown, userDropdown;
        
        function updateStatus(message) {
            document.getElementById('last-action').textContent = message;
            console.log(message);
        }
        
        function forceShowLanguage() {
            updateStatus('Forcing language dropdown...');
            if (languageDropdown) {
                languageDropdown.show();
            }
        }
        
        function forceShowUser() {
            updateStatus('Forcing user dropdown...');
            if (userDropdown) {
                userDropdown.show();
            }
        }
        
        function debugDropdowns() {
            updateStatus('Debugging all dropdowns...');
            const triggers = document.querySelectorAll('[data-bs-toggle="dropdown"]');
            triggers.forEach((trigger, index) => {
                console.log(`Dropdown ${index + 1}:`, trigger);
                const instance = bootstrap.Dropdown.getInstance(trigger);
                console.log(`Instance ${index + 1}:`, instance);
            });
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            // Update status
            document.getElementById('bootstrap-status').textContent = typeof bootstrap !== 'undefined' ? 'Loaded ✅' : 'Not loaded ❌';
            
            const triggers = document.querySelectorAll('[data-bs-toggle="dropdown"]');
            document.getElementById('dropdown-count').textContent = triggers.length;
            
            // Initialize dropdowns
            triggers.forEach((trigger, index) => {
                console.log(`Initializing dropdown ${index + 1}:`, trigger.id);
                
                const dropdown = new bootstrap.Dropdown(trigger);
                
                if (trigger.id === 'languageDropdown') {
                    languageDropdown = dropdown;
                } else if (trigger.id === 'userDropdown') {
                    userDropdown = dropdown;
                }
                
                // Add event listeners
                trigger.addEventListener('click', function() {
                    updateStatus(`Clicked ${trigger.id || 'dropdown ' + (index + 1)}`);
                });
                
                trigger.addEventListener('show.bs.dropdown', function() {
                    updateStatus(`Showing ${trigger.id || 'dropdown ' + (index + 1)}`);
                });
                
                trigger.addEventListener('shown.bs.dropdown', function() {
                    updateStatus(`Shown ${trigger.id || 'dropdown ' + (index + 1)}`);
                });
                
                trigger.addEventListener('hide.bs.dropdown', function() {
                    updateStatus(`Hiding ${trigger.id || 'dropdown ' + (index + 1)}`);
                });
            });
            
            updateStatus('Page loaded and dropdowns initialized');
        });
    </script>
</body>
</html>
